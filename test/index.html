<html>
<head>
  <title>CGU - Tests</title>
  <style type="text/css">
    pre {
      font-size: 11px;
    }
    
    .pass {
      color: #0a0;
    }
    .fail {
      color: #f00;
    }
  </style>
</head>
<body>

<script src="../lib/cgu.js"></script>
<script type="text/javascript">
var pass = '<span class="pass">PASS</span>';
var fail = '<span class="fail">FAIL</span>';

var write = function (passfail, comment) {
  if (passfail === null)
    document.writeln('  ', comment);
  else if (passfail === !!passfail)
    document.writeln((passfail ? pass : fail), ' ', comment);
  else
    document.writeln();
};

var notate = function (title, comment, message) {
  return title + ': ' + comment + (message ? ' (' + message + ')' : '');
};

var cycle = function (c) {
  var i, j, title, cases;
  
  if (c.notes.length > 0) {
    write();
    for (i = 0; i < c.notes.length; i += 1)
      write(null, c.notes[i]);
  }
  
  for (i = 0; i < c.tests.length; i += 1) {
    title = c.tests[i].title;
    cases = c.tests[i].cases;
    
    write();
    
    for (j = 0; j < cases.length; j += 1) {
      try {
        write((cases[j][1] === cases[j][2]()), notate(title, cases[j][0]));
      } catch (e) {
        write(false, notate(title, cases[j][0], e.message));
      }
    }
  }
  
  write();
}
</script>

<script src="../src/crypto/util.bit64.js"></script>
<script src="../src/crypto/util.seq.js"></script>
<script type="text/javascript">
var cycles = {};

document.write('<pre>');

document.writeln('DDAF35A193617ABACC417349AE20413112E6FA4E89A97EA20A9EEEE64B55D39A2192992A274FC1A836BA3C23A3FEEBBD454D4423643CE80E2A9AC94FA54CA49F'.replace(/([0-9a-f]{8}(?!$))/gi, '$1-'));
document.writeln(CGU.hash('sha512', 'abc').base16().replace(/([0-9A-F]{8}(?!$))/g, '$1-'));
document.writeln();

document.writeln('CF83E1357EEFB8BDF1542850D66D8007D620E4050B5715DC83F4A921D36CE9CE47D0D13C5D85F2B0FF8318D2877EEC2F63B931BD47417A81A538327AF927DA3E'.replace(/([0-9a-f]{8}(?!$))/gi, '$1-'));
document.writeln(CGU.hash('sha512', '').base16().replace(/([0-9A-F]{8}(?!$))/g, '$1-'));
document.writeln();

document.writeln(Sequence(BIT64.FIFO.encode([BIT64.OPER.ADD([0x0, 0xffffffff], [0x0, 0xffffffff])])).hex().replace(/([0-9a-f]{8}(?!$))/gi, '$1-'));
document.writeln(Sequence(0xffff + 0xffff).hex().replace(/([0-9a-f]{8}(?!$))/gi, '$1-'));
document.writeln();

document.writeln(Sequence(BIT64.FIFO.encode([BIT64.OPER.AND([0xffffffff, 0xffff], [0xffff, 0xffffffff])])).hex().replace(/([0-9a-f]{8}(?!$))/gi, '$1-'));
document.writeln(Sequence(0xf0ff & 0xff0f).hex().replace(/([0-9a-f]{8}(?!$))/gi, '$1-'));
document.writeln();

document.writeln(Sequence(BIT64.FIFO.encode([BIT64.OPER.OR([0xffff, 0x0], [0xffff, 0xffff0000])])).hex().replace(/([0-9a-f]{8}(?!$))/gi, '$1-'));
document.writeln(Sequence(0xf00f | 0xff0f).hex().replace(/([0-9a-f]{8}(?!$))/gi, '$1-'));
document.writeln();

document.write('</pre>');
</script>
<script src="cycles/cgu.js"></script>
<script src="cycles/type.js"></script>
<script src="cycles/crypto.js"></script>
<script src="cycles/query.js"></script>
<script src="cycles/cookie.js"></script>
<script src="cycles/time.js"></script>
<script type="text/javascript">

(function () {
  for (var c in cycles) {
    document.write('<pre>');
    
    document.writeln(c);
    cycle(cycles[c]);
    
    document.write('</pre>');
  };
})();
</script>

</body>
</html>

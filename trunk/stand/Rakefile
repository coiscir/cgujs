################################################################################
# Prepare
####
ROOT = File.expand_path(File.dirname(__FILE__))
DIRS = ['type', 'cookie', 'crypto', 'query']

require 'rake'
require 'erb'
require File.join(ROOT, 'builder')

DIRS.sort.each do |dir|
  require File.join(ROOT, dir, 'rake.inc')
end

################################################################################
# Tools
####
def outPath(file)
  file.sub(/#{Regexp.quote(ROOT)}\/([^\/]+)\/(?:[^\/]*\/)*([^\/]+)$/, '\1: \2')
end

################################################################################
# Tasks
####
task :default => :help

task :help do
  print [
    "Global tasks:",
    "  build",
    "  clean",
    "",
    "Script tasks:"
  ].join($/) + $/
end

desc "Build all library scripts"
task :build

desc "Delete all library scripts"
task :clean
